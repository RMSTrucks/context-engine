{"body":"## Goal\nConnect REMUS/GENESIS call transcripts to context engine\n\n## Deliverables\n\n### 1. MCP Server Infrastructure\n- [ ] Create mcp-servers/vapi-integration/ directory structure\n- [ ] Implement MCP stdio server boilerplate\n- [ ] Define tool schemas for call operations\n\n### 2. Webhook Handler\n- [ ] FastAPI webhook server on port 5515\n- [ ] POST /vapi/call-ended endpoint\n- [ ] POST /vapi/call-started endpoint (optional)\n- [ ] Signature verification for VAPI webhooks\n- [ ] IP whitelist (VAPI servers only)\n\n### 3. Call Processing\n- [ ] Save call transcripts to audio_transcripts table\n- [ ] Tag with agent (remus/genesis)\n- [ ] Extract action items from transcript\n- [ ] Link to contact_id in Close CRM\n- [ ] Store call metadata (duration, cost, etc)\n\n### 4. MCP Tools\n- [ ] Implement search_calls(query, agent, days_back)\n- [ ] Implement get_call_transcript(call_id)\n- [ ] Implement get_recent_calls(agent, limit)\n- [ ] Implement extract_action_items(call_id)\n\n### 5. CRM Integration\n- [ ] Auto-update Close CRM from REMUS calls\n- [ ] Create follow-up tasks from action items\n- [ ] Link transcript to contact record\n\n### 6. Testing\n- [ ] Mock VAPI webhook payloads\n- [ ] Test call transcript storage\n- [ ] Test search functionality\n- [ ] Test CRM auto-update\n\n### 7. Documentation\n- [ ] Webhook setup guide\n- [ ] VAPI configuration instructions\n- [ ] Example call queries\n\n## Success Criteria\n- 100% of REMUS/GENESIS calls captured\n- Searchable within seconds of call end\n- CRM auto-updated for REMUS calls\n- Action items extracted with \u003e80% accuracy\n\n## Timeline\nWeek 4 (5-7 days)\n\n## Dependencies\n- Phase 2 complete (shares audio storage)\n- VAPI webhook access configured","title":"Phase 4: VAPI Integration MCP Server"}
